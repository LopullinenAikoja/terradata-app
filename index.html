 <!doctype html>
<html xml:lang="en-gb" lang="en-gb" >
	<title>TerraData Version 1.3.1</title>
		<!-- css -->
		<link rel="stylesheet" href="css/style.css" type="text/css" media="screen, projection"/>
		
		<!-- jQuery -->
		<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
		
		<!-- google -->
		<script type="text/javascript" src="https://www.google.com/jsapi"></script>
	</head>
	<body>
		<div id="page_wrapper">
			
			<!-- left column -->
			<div id="left-column-wrapper">
				<div class="left-column-shell">
					<div id="queryParametersBox">
						<form id="queryParams" name="queryParams">
							
							<!-- location -->
							<div class="form-block-title-white">Search Location</div>

							<div id="stateSelectDropDown" class="select-row">
								<select id="stateSelect" name="stateSelect" onChange="stateChange()" >
									<option id="dummy1" value="">Select a State</option>
									<option id="colorado" value="CO">Colorado</option>
									<option id="connecticut" value="CT">Connecticut</option>
									<option id="delaware" value="DE">Delaware</option>
									<option id="washingtonDC" value="DC">District of Columbia</option>
									<option id="hawaii" value="HI">Hawaii</option>												
									<option id="idaho" value="ID">Idaho</option>
									<option id="maryland" value="MD">Maryland</option>																
									<option id="massachusetts" value="MA">Massachusetts</option>	
									<option id="montana" value="MT">Montana</option>									
									<option id="newJersey" value="NJ">New Jersey</option>
									<option id="oregon" value="OR">Oregon</option>
									<option id="wyoming" value="WY">Wyoming</option>
								</select>
							</div>
		
							<div id="countySelectDropDown">
								<select id="countySelect" onChange="countyChange()">
										<option id="dummy2" value="" selected="selected">Select a County</option>
								</select>
							</div>					
		
							<div id="townSelectDropDown">
								<select name="townSelect" id="townSelect">
									<option id="dummy3" value="" selected="selected">Select a Town</option>
								</select>	
							</div>
							
							<div class="input-row">
								<input id="ownername" type="text" placeholder="Owner Name                 (optional)" />
							</div>
							<br />
							
							<!-- acreage -->
							<div class="form-block-title-white">Acreage</div>
							<div class="input-row">
								<input id="acerageLowerBound" type="text" placeholder="Greater Than                (optional)" />
							</div>
							<div class="input-row">
								<input id="acerageUpperBound" type="text" placeholder="Less Than                      (optional)" />
							</div>
							<br/>
							
							<!-- assesment -->
							<div class="form-block-title-white">Assessment</div>
							<div class="input-row">
									<input id="aLower" name="aLower" type="text" placeholder="Value Greater Than       (optional)" />
							</div>
							<div class="input-row">
									<input id="aUpper" name="aUpper" type="text" placeholder="Value Less Than             (optional)" />
							</div>
							<br/>
							
							<!-- book page -->
							<div class="form-block-title-white">Book/Page</div>
							<div class="input-row">
								<input id="book" type="text" placeholder="Book Greater Than       (optional)"  /> 
							</div>
							<div class="input-row">
								<input id="page" type="text" placeholder="Book Less Than              (optional)"  /> 
							</div>
							<br/>	
						
							<div id="queryboxButtons">
								<button class="submit-button" onclick="submitQuery()" type="button">QUERY</button>	
								<button class="submit-button" id="resetButton" type="reset">RESET	</button>
							</div>
							<div class="row-height-36">
								<img id="progress" src="images/progress-bar.gif" width="280" height="30" alt="---" />
							</div>
							<br />
					
							<!-- more options -->
							<div class="form-block-title-gold">More Options</div>
							<!--<a href="#" id="toggle"> More Options (click to expand)</a>-->
							
							<div id="advancedSearch" class="link-grey">
								<dl class="accordion">
		
									<dt><a href="#">Parcel Information & Land Use</a></dt>
										<dd>								
											<div class="input-row">
												<input id="parcelid" name="parcelid" type="text" placeholder="Parcel ID" />
											</div>
											<div class="input-row">
												<input id="parcelAddress" name="parcelAddress" type="text" placeholder="Parcel Address" />								
											</div>
											<div class="input-row">
												<input id="landuse" name="landuse" type="text" placeholder="Land Use" />
											</div>											
										</dd>
		
										
										<dt><a href="#">Book & Page</a></dt>
										<dd>
											<div class="input-row">
												<input id="book3" type="text" placeholder="Book Less Than" />
											</div>
											<div class="input-row">
												<input id="page3" type="text" placeholder="Page Less Than" />
											</div>								
										</dd>
										
										<dt><a href="#">Owner Information</a></dt>
										<dd>
											<div class="input-row-2">
												<label for="ownerStateSearch">Owner/Parcel State Different?</label>
												<div class="checkbox-checkbox"><input type="checkbox" id="ownerStateSearch" name="ownerStateSearch" value="yes" /></div>
											</div>
										</dd>
										
										<dt><a href="#">Wetlands</a></dt>
											<dd>
												<div class="input-row-2">
													<label for="wetlandsSearch">Exclude Wetlands?</label>
													<div class="checkbox-checkbox"><input type="checkbox" id="wetlandsSearch" name="wetlandsSearch" value="yes" /></div>
												</div>
												<div class="input-row">
													<input id="wetcode" name="wetcode" type="text" placeholder="Wetcode" />
												</div>
												
												<div class="input-row">
													<input id="areaAcres" name="areaAcres" type="text" placeholder="Area by Acres" />
												</div>
											</dd>
									
									<dt><a href="#">Liens</a></dt>
									<dd>
										<div class="input-row-2">
											<label for="lienquery">Search All Liens?</label>
											<div class="checkbox-checkbox"><input class="float-left" type="checkbox" id="lienquery" name="lienquery" value="yes" /></div>
										</div>
										<div class="input-row">
											 Lien Type and Amount
											<div id="lienTypesCell"></div>										
										</div>							
									</dd>
									<!-- 
									<dt><a href="#"> Max Results</a></dt>
									<dd>
										<div class="input-row">
											<input id="maxresults" name="maxresults">
										</div>	
									</dd>	
									-->
								</dl>
							</div>
						</form>
						
					</div>
					
				</div>
				
			<!-- end left column -->
			</div>		
					
			<!-- right column -->
			<div id="right-column-wrapper">
			
				<!-- header -->
				<div id="banner">
					<div id="banner-results">
						<p id="resultsHandle"> RESULTS </p>
					</div>
					<div id="banner-content">
						TerraData v2 <!--<a href="/userLogging" target="_blank"> Logs </a>-->
					</div>
				</div>
				
				<!-- header -->
				<div id="search-results-panel-wrapper">
					<div class="search-results-panel-shell">
						<div class="search-results-panel-content">

							<!-- results -->
							<div id="resultsList" style="overflow:auto;">
								<div id="resultsTable1" style="display:none; overflow:auto;"></div>
								<div id="Searchresult"><!--items here--></div>
							</div>	
							
							<!-- results -->
							<div id ="resultsBox" class="column-right">
								<div id="search-results-panel-controls">
									<input class="button-layers" type="button" value="LAYERS" data-dropdown="#dropdown-1" />
	
									<!-- pagination -->
									<div id="Pagination" class="pagination"></div>
									
									<input class="button-download" type="button" value="Download" />
	
									<!--
									<button data-dojo-type="dijit/form/Button" type="button">Download Results
											<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
												require(["dojo/dom"], function(dom){
													//alert($('#queryParams').serialize());
													$('<iframe id="dlBox" name="dlBox" hieght=0px width=0px style="display:none" src="/query?download=yes&' + $('#queryParams').serialize() + '">').appendTo('body');
												});
											</script>
									</button>	
									-->
									
									<!-- 
									<div id="additonalParcelLayers">
										<label>Additional Parcel Layers:</label>
										<div id="parcelLayersCell"></div>
									</div>
									-->
								</div>
									
								<!-- gold results info box on tab right -->
								<div id="resultsInfo">
									<div id="radiusSearchBox"></div>
									<div id="infoTable">Property Info</div>
									<div id="downloadParcelInfoDiv">
										<button id="downloadParcelInfo" class="download-parcel-button" type="button">Download Parcel Info</button>
									</div>
									<div id="newParcelInfoTabDiv">
										<button id="newParcelInfoTab" class="download-parcel-button" type="button">Open New Tab</button>
									</div>
								</div>	
								
							</div>
							
							<!--
							<div id="dropdown-1" class="dropdown dropdown-tip">
								<div class="dropdown-panel">
									<div id="layersBox" name="layersBox">
					
										<div>Nation Wide Layers</div>
											<div id="nationWideLayers" name="nationWideLayers">  
											</div>
									
											<br/>						
											<div>State Wide Layers</div>
											<div id="stateWideLayers" name="stateWideLayers">
											</div>
										
											<br/>
											<div> County Wide Layers </div>
										
											<div id="countyWideLayers" name="countyWideLayers"> 
												<div id="wetlandsBox" name ="wetlandsBox">
													<button name="wetlands" id="wetlands"  data-dojo-type="dijit/form/ToggleButton"
														data-dojo-props="iconClass:'dijitCheckBoxIcon', checked:false">Wetlands
														<script type="dojo/on" data-dojo-event="click" data-dojo-args="evt">
															require(["dojo/dom"], function(dom){
																if(!document.getElementById("wetlands").checked){																			
																	wetlandsLayerLookup();												
																}else{
																	clearWetlandsKml();
																}
															});
															
														</script>
													</button>
												</div>
												<div id="countyLayersBox" name="countyLayersBox">
											</div>
										</div>
									</div>
								</div>
							-->
							
							<!-- end results -->
							</div>
	
						</div>
						<div id="panel-tab" class="panel-tab">Properties</div>
					</div>
					
					
					<div id="below-panel-wrapper">
					
						<!-- help -->
						<div id="help-wrapper">
							<div class="help-1">
								Please select the state in which you would like to search. You may narrow down the search criteria by optionally selecting a county and a town as well. Additionally you may search a property by owner name.
							</div>
							
							<div class="help-2">
								Further narrow down your search by choosing an assessment maximum value and or a minimum value.
							</div>
							
							<div class="help-3">
								Further narrow down your search by choosing an acreage maximum value and or a minimum value.
							</div>
							
							<div class="help-4">
								Further narrow down your search by choosing a book/page maximum value and or a minimum value.
							</div>
							
							<img class="globe" src="images/globe_200x200.png" alt="Globe" width="150" height="150"/>
						</div>

						<!-- map tarter -->
						<div id="map"></div>
					</div>
					
				<!-- end right column -->
				</div>
				
			<!-- end wrapper -->
			</div>
		
		<!--</div>-->
		
	<!-- Things that need to be done when the page loads -->
	<script type="text/javascript">		
		jQuery(window).bind(
		"beforeunload", 
			function() { 
			
				$.ajax({
					url:'trackUsers',
					success:function(){
						alert("Log out recorded");
						}
					});
				//return confirm("Do you really want to close?") 
			}
		);
		
		$(function(){
			$("#newParcelInfoTabDiv").click(function(){
				window.open("resultsPage.html");
				});

		});
		
		$(function()
		  {
			 $("a#toggle").click(function()
				 {
					if(!$("#advancedSearch").is(":visible"))	{								
						$("a#toggle").html("More Options (click to minimize)");
					}else{
						$("a#toggle").html("More Options (click to expand)");

					}
					$("#advancedSearch").slideToggle();
					
					return false;
				 }); 
		  });
		
		(function($) {
			var allPanels = $('.accordion > dd').hide();
	
			$('.accordion > dt > a').click(function() {
				$(this).parent().next('dd').slideUp();
				
				if($(this).parent().next().is(':hidden'))
				{
					$(this).parent().next().slideDown();
				}
				
				return false;
			});
	
		})(jQuery);
	
		//an array to keep track of the puhpins created by the query
		var pushpinList = new Array();
	
		function townParcelMaps(){
			var townNumber = (dijit.byId('townParcelMaps').attr('value'))
			var file = 'MA_' + townNumber;
			var kmlURL = 'http://commondatastorage.googleapis.com/td01/Parcel%20%26%20Road%20Town-By-Town/'+ townNumber +'.kml'
			parcelLayerLookup(file,kmlURL);
	
		}
		
		// load all this last
		$(document).ready(function() {
			var button = document.getElementById('subscribe');
			$(button).live('click', function () {     
				$('#button').html('<a href="#" class="cssSubmitButton"> </a>');	
				alert("test2");
				
				});
		
				$("#download").click(function() {				
					$('<iframe id="dlBox" name="dlBox" hieght=0px width=0px style="display:none" src="/query?download=yes">').appendTo('body');	
			});
			
			//submit button on click
			$('#resetButton').click(function() {
				document.getElementById("queryParams").reset();
			});
			
		});
		
		// this was an accident
		function hideWetcode(){
			alert("Does Wetcode need hidden?");
		}
		
		//
		$( "#progress" ).hide();
		$( "#banner-results" ).hide();
		$( "#search-results-panel-controls" ).hide();
		$( "#downloadParcelInfoDiv" ).hide();
		$( "#newParcelInfoTabDiv" ).hide();
		$( "#help-wrapper" ).show();
		
		
	</script>
	
	<!-- Example Json -->
	<script type="text/javascript" src="scripts/exampleJson.js"> </script>
	
	<!-- Google Earth Plugin Map functions -->
	<script type="text/javascript" src="scripts/map.js"> </script>
	<script type="text/javascript" src="scripts/pinMap.js"> </script>
	<script type="text/javascript" src="scripts/updateMap.js"> </script>
	
	<!-- KML objects Possibly reorganize in the future-->
	<script type="text/javascript" src="scripts/parcelLayerKmlObjects.js"> </script>
	<script type="text/javascript" src="scripts/roadLayerKmlObjects.js"> </script>
	<script type="text/javascript" src="scripts/wetlandLayerKmlObjects.js"> </script>	
	<script type="text/javascript" src="scripts/thematicLayerKmlObjects.js"></script>

	<!-- thematic overlays function for the demo -->
	<script type="text/javascript" src="scripts/loadThematicOverlays.js"> </script>	
	
	<!-- KML related functions -->
	<script type="text/javascript" src="scripts/parcelLayerLookup.js"> </script>
	<script type="text/javascript" src="scripts/roadLayerLookup.js"> </script>	
	<script type="text/javascript" src="scripts/removeParcelLayer.js"> </script>	
	
	<!-- Wetlands functions and variable -->
	<script type="text/javascript" src="scripts/wetlandsLayerLookup.js"> </script>
	
	<!-- All the clear KML functions  -->
	<script type="text/javascript" src="scripts/clearKml.js"> </script>
	
	<!-- Load State Related Layers -->
	<script type="text/javascript" src="scripts/stateLayers.js"> </script>
	
	<!-- js files for the county selection drop down -->
	<script type="text/javascript" src="scripts/stateChange.js"> </script>
	<script type="text/javascript" src="scripts/countySelection.js"> </script>
	
	<!-- js files for the city selection drop down/ files for when the county drop down value changes-->
	<script type="text/javascript" src="scripts/countyChange.js"> </script>
	<script type="text/javascript" src="scripts/loadTowns.js"> </script>
	
	<!-- submit button js file -->
	<script type="text/javascript" src="scripts/submitQuery.js"> </script>
	
	<!-- contains print results functions -->
	<script type="text/javascript" src="scripts/printResults.js"> </script>
	
	<!-- Jquery Pagination plugin/ and settings functions for printing results-->
	<script type="text/javascript" src="scripts/pagination.js"></script>
	<script type="text/javascript" src="scripts/paginationSettings.js"></script>
	
	<!-- Contains update info screen functions -->
	<script type="text/javascript" src="scripts/updateInfoScreen.js"></script>

	<!-- Radius Search js file -->
	<script type="text/javascript" src="scripts/radiusSearch.js"></script>

	<!-- BW 130820 disabled
	<script type="text/javascript" src="scripts/layerButtons.js"></script>
	 -->
  </body>
</html>